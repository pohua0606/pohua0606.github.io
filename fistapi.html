<!DOCTYPE html>
<html lang="en">

<head>
	
	<meta charset="UTF-8">
	<title>first-api</title>
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
	<meta name="og:title" content="Streaming!">
	<meta name="og:description" content="lololol！">
	<meta name="og:type" content="website">
	<meta name="og:image" content="http://lolwp.com/gnar/gnar-teaser-background/"
		
		body{
			background-image: url('http://lolwp.com/gnar/gnar-teaser-background/');
			background-repeat: no-repeat;
			background-size: cover;
		}
		.container{
			margin-top: 40px;
		}
		.video{
			margin-top: 30px;
		}
		
		.video img{
			border: 2px solid white;
		}
	</style>

</head>

<body>
	
	<div class="container">
		<div class="row">
			<div class="video col-md-4">
				<a id="stream0a">
					<img id="stream0" alt="pic!">
				</a>
			</div>

			<div class="video col-md-4">
				<a id="stream1a">
					<img id="stream1" alt="pic!">
				</a>
			</div>		

			<div class="video col-md-4">
				<a id="stream2a">
					<img id="stream2" alt="pic!">
				</a>
			</div>				
		</div>
	</div>

	<div class="container">
		<div class="row">
			<div class="video col-md-4">
				<a id="stream3a">
					<img id="stream3" alt="pic!">
				</a>
			</div>

			<div class="video col-md-4">
				<a id="stream4a">
					<img id="stream4" alt="pic!">
				</a>
			</div>		

			<div class="video col-md-4">
				<a id="stream5a">
					<img id="stream5" alt="pic!">
				</a>
			</div>				
		</div>
	</div>

	<div class="container">
		<div class="row">
			<div class="video col-md-4">
				<a id="stream6a">
					<img id="stream6" alt="pic!">
				</a>
			</div>

			<div class="video col-md-4">
				<a id="stream7a">
					<img id="stream7" alt="pic!">
				</a>
			</div>		

			<div class="video col-md-4">
				<a id="stream8a">
					<img id="stream8" alt="pic!">
				</a>
			</div>				
		</div>
	</div>
	
	<script type="text/javascript">
	
		document.addEventListener('DOMContentLoaded', () => {
			var request = new XMLHttpRequest();
			// what is the difference b/w ? AND &
			// true 不同步 、 false 同步
			 request.open('GET', 'https://api.twitch.tv/kraken/streams/?limit=9&game=League%20of%20Legends', false);
			
			// set the header on our request
			request.setRequestHeader('Accept', 'application/vnd.twitchtv.v5+json')
			request.setRequestHeader('Client-ID', 'to2hm1n12dsh0qk9nwk0mrbozersnq')
			request.onload = function() {
				if (request.status >= 200 && request.status < 400)
				{
				    // Success!
				    
				    var data = JSON.parse(request.responseText);
			    	console.log(data);
				    
				    function setAt() {
					
						for( var i = 0; i < 9; i++)
						{
							var streamid = document.getElementById('stream' + i) ;
							var streamlink = document.getElementById('stream' + i + 'a') ;
							var imgLink = data.streams[i].preview.medium;
							var hrefLink = data.streams[i].channel.url;
							streamid.setAttribute('src',imgLink)
							streamlink.setAttribute('href',hrefLink)
						}
					}
			    
			    	setAt();
			   	}
			};
			request.send();
		});
	</script>









</body>
</html>

	
	<style type="text/css">
		
		body{
			background-image: url('/Users/lipohua/Desktop/Gnar-Teaser-Background.jpg');
			background-repeat: no-repeat;
			background-size: cover;
		}

		.container{
			margin-top: 40px;
		}

		.video{

			margin-top: 30px;
		}
		
		.video img{
			border: 2px solid white;
		}

	</style>

</head>

<body>
	
	<div class="container">
		<div class="row">
			<div class="video col-md-4">
				<a id="stream0a">
					<img id="stream0" alt="pic!">
				</a>
			</div>

			<div class="video col-md-4">
				<a id="stream1a">
					<img id="stream1" alt="pic!">
				</a>
			</div>		

			<div class="video col-md-4">
				<a id="stream2a">
					<img id="stream2" alt="pic!">
				</a>
			</div>				
		</div>
	</div>

	<div class="container">
		<div class="row">
			<div class="video col-md-4">
				<a id="stream3a">
					<img id="stream3" alt="pic!">
				</a>
			</div>

			<div class="video col-md-4">
				<a id="stream4a">
					<img id="stream4" alt="pic!">
				</a>
			</div>		

			<div class="video col-md-4">
				<a id="stream5a">
					<img id="stream5" alt="pic!">
				</a>
			</div>				
		</div>
	</div>

	<div class="container">
		<div class="row">
			<div class="video col-md-4">
				<a id="stream6a">
					<img id="stream6" alt="pic!">
				</a>
			</div>

			<div class="video col-md-4">
				<a id="stream7a">
					<img id="stream7" alt="pic!">
				</a>
			</div>		

			<div class="video col-md-4">
				<a id="stream8a">
					<img id="stream8" alt="pic!">
				</a>
			</div>				
		</div>
	</div>
	
	<script type="text/javascript">
	
		document.addEventListener('DOMContentLoaded', () => {

			var request = new XMLHttpRequest();

			// what is the difference b/w ? AND &
			// true 不同步 、 false 同步
			request.open('GET', 'https://api.twitch.tv/kraken/streams/?limit=9&game=League%20of%20Legends', false);
			
			// set the header on our request
			request.setRequestHeader('Accept', 'application/vnd.twitchtv.v5+json')
			request.setRequestHeader('Client-ID', 'to2hm1n12dsh0qk9nwk0mrbozersnq')

			request.onload = function() {
				if (request.status >= 200 && request.status < 400)
				{
				    // Success!
				    
				    var data = JSON.parse(request.responseText);
			    	console.log(data);

				    
				    function setAt() {
					
						for( var i = 0; i < 9; i++)
						{
							var streamid = document.getElementById('stream' + i) ;
							var streamlink = document.getElementById('stream' + i + 'a') ;

							var imgLink = data.streams[i].preview.medium;
							var hrefLink = data.streams[i].channel.url;

							streamid.setAttribute('src',imgLink)
							streamlink.setAttribute('href',hrefLink)
						}
					}
			    
			    	setAt();
			   	}

			};


			request.send();


		});


	</script>









</body>
</html>
